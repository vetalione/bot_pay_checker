# üö´ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –≥—Ä—É–ø–ø –∏ –∫–∞–Ω–∞–ª–æ–≤

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω **middleware** –∫–æ—Ç–æ—Ä—ã–π –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –∏ –∫–∞–Ω–∞–ª–æ–≤.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–¥–∞
**–§–∞–π–ª:** `src/index.ts`  
**–°—Ç—Ä–æ–∫–∏:** ~53-67 (—Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞)

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

```typescript
bot.use(async (ctx, next) => {
  const chatType = ctx.chat?.type;
  
  // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º:
  if (chatType === 'group' || chatType === 'supergroup' || chatType === 'channel') {
    return; // –ü—Ä–µ—Ä—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
  }
  
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ:
  // - chatType === 'private' (–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
  return next();
});
```

### –¢–∏–ø—ã —á–∞—Ç–æ–≤ –≤ Telegram

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|-----|----------|-----------|
| `private` | –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (1-–Ω–∞-1) | ‚úÖ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è** |
| `group` | –û–±—ã—á–Ω–∞—è –≥—Ä—É–ø–ø–∞ | ‚ùå **–ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è** |
| `supergroup` | –°—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞ | ‚ùå **–ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è** |
| `channel` | –ö–∞–Ω–∞–ª | ‚ùå **–ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è** |

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞ –≤ –ª–æ–≥–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è:

```
üö´ Ignored message from group/channel {
  chatType: 'supergroup',
  chatId: -1002895096401,
  messageType: 'message'
}
```

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞

### ‚úÖ –î–û (–±—ã–ª–æ)
- –ë–æ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª –Ω–∞ **–í–°–ï** —Å–æ–æ–±—â–µ–Ω–∏—è –≤–µ–∑–¥–µ
- –í –≥—Ä—É–ø–ø–µ/–∫–∞–Ω–∞–ª–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª –∫–æ–º–∞–Ω–¥—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ú–æ–≥ —Å–ø–∞–º–∏—Ç—å –≤ –≥—Ä—É–ø–ø–µ –æ—Ç–≤–µ—Ç–∞–º–∏

### ‚úÖ –ü–û–°–õ–ï (—Å—Ç–∞–ª–æ)
- –ë–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç **–¢–û–õ–¨–ö–û** –Ω–∞ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (private)
- –í –≥—Ä—É–ø–ø–µ/–∫–∞–Ω–∞–ª–µ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç** –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–±—ã—Ç–∏—è
- –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø—É

## Use Cases

**–ì–¥–µ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ:**
1. ‚úÖ –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª `-1003216850856` –∫–∞–∫ –∞–¥–º–∏–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è invite-—Å—Å—ã–ª–æ–∫
2. ‚úÖ –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç `-1002895096401` –∫–∞–∫ –∞–¥–º–∏–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è invite-—Å—Å—ã–ª–æ–∫
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–∏—à—É—Ç –≤ —ç—Ç–∏ —á–∞—Ç—ã, –Ω–æ –±–æ—Ç –ù–ï –æ—Ç–≤–µ—á–∞–µ—Ç
4. ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–ß—Ç–æ –ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ:**
- ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ invite-—Å—Å—ã–ª–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ (API –≤—ã–∑–æ–≤—ã)
- ‚ùå –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ `/stats` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ (–≤ –ª–∏—á–∫–µ)
- ‚ùå –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (photo, text, callbacks) —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ (–≤ –ª–∏—á–∫–µ)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ
```bash
npm run dev
```

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç ‚úÖ
2. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` ‚Üí –ë–æ—Ç –ù–ï –æ—Ç–≤–µ—Ç–∏—Ç ‚ùå (–≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç `üö´ Ignored`)

### –ù–∞ Railway
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- üõ°Ô∏è –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∞–º –≤ –≥—Ä—É–ø–ø–∞—Ö
- üõ°Ô∏è –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—É–±–ª–∏—á–Ω—ã–π —á–∞—Ç
- üõ°Ô∏è –§–æ–∫—É—Å–∏—Ä—É–µ—Ç –±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç–∞ –≤ –ª–∏—á–∫–µ)
- üõ°Ô∏è –≠–∫–æ–Ω–æ–º–∏—Ç API requests (–Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùì –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤–æ–æ–±—â–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø —á–∞—Ç–∞ –≤ –ª–æ–≥–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∏—à–µ—Ç–µ –±–æ—Ç—É –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (private), –∞ –Ω–µ –≤ –≥—Ä—É–ø–ø—É

### ‚ùì –ù—É–∂–Ω–æ —á—Ç–æ–±—ã –±–æ—Ç –æ—Ç–≤–µ—á–∞–ª –≤ –≥—Ä—É–ø–ø–µ

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ —É—Å–ª–æ–≤–∏–µ –≤ middleware:

```typescript
// –†–∞–∑—Ä–µ—à–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤ –≥—Ä—É–ø–ø–∞—Ö (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
if (chatType === 'channel') { // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª—ã
  return;
}
```

## –í–µ—Ä—Å–∏—è

**–î–æ–±–∞–≤–ª–µ–Ω–æ:** 5 –Ω–æ—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–í–µ—Ä—Å–∏—è –±–æ—Ç–∞:** 1.0.0

---

‚úÖ **–ì–æ—Ç–æ–≤–æ! –ë–æ—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.**
