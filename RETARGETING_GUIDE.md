# üéØ Retargeting Campaigns - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

Retargeting (—Ä–µ—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥) - —ç—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∞–ª–∏, –Ω–æ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –≤–æ—Ä–æ–Ω–∫—É.

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

‚ùå **–ë–µ–∑ retargeting:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–º–æ—Ç—Ä–µ–ª video1 ‚Üí –∑–∞–±—ã–ª ‚Üí –ø–æ—Ç–µ—Ä—è–Ω –Ω–∞–≤—Å–µ–≥–¥–∞

‚úÖ **–° retargeting:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–º–æ—Ç—Ä–µ–ª video1 ‚Üí —á–µ—Ä–µ–∑ 24—á –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚Üí –≤–µ—Ä–Ω—É–ª—Å—è ‚Üí –∫—É–ø–∏–ª

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏

### 1Ô∏è‚É£ –ó–∞—Å—Ç—Ä—è–≤—à–∏–µ –Ω–∞ video1
```bash
npm run retargeting stuck_video1
```

**–ö–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- –ü–æ—Å–º–æ—Ç—Ä–µ–ª–∏ video1
- –ù–ï –Ω–∞–∂–∞–ª–∏ "–°–º–æ—Ç—Ä–µ—Ç—å –¥–∞–ª—å—à–µ"
- –ü—Ä–æ—à–ª–æ 24+ —á–∞—Å–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–æ–ª—å–∑–µ –≤–∏–¥–µ–æ 2 –∏ 3
- –ö–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å –¥–∞–ª—å—à–µ"

---

### 2Ô∏è‚É£ –ó–∞—Å—Ç—Ä—è–≤—à–∏–µ –Ω–∞ video2
```bash
npm run retargeting stuck_video2
```

**–ö–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- –ü–æ—Å–º–æ—Ç—Ä–µ–ª–∏ video2
- –ù–ï –Ω–∞–∂–∞–ª–∏ "–ì–æ—Ç–æ–≤!"
- –ü—Ä–æ—à–ª–æ 24+ —á–∞—Å–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–æ—Ç–∏–≤–∞—Ü–∏—è –¥–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∏–¥–µ–æ
- –ö–Ω–æ–ø–∫–∞ "–ì–æ—Ç–æ–≤!"

---

### 3Ô∏è‚É£ –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞
```bash
npm run retargeting abandoned_payment
```

**–ö–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- –î–æ—à–ª–∏ –¥–æ –≤—ã–±–æ—Ä–∞ –≤–∞–ª—é—Ç—ã –ò–õ–ò –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ–∫–∞
- –ù–ï –∑–∞–≤–µ—Ä—à–∏–ª–∏ –æ–ø–ª–∞—Ç—É
- –ü—Ä–æ—à–ª–æ 24+ —á–∞—Å–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ—Å—Ç
- –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å"

---

## –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏
```bash
npm run retargeting stats
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
```
start                 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
video1                800 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
video2                600 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
payment_choice        400 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
waiting_receipt       200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
completed             150 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

---

### üí∞ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –æ–ø–ª–∞—Ç—É
```bash
npm run retargeting conversion
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
```
–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:  1000
–û–ø–ª–∞—Ç–∏–ª–∏:             150
–ö–æ–Ω–≤–µ—Ä—Å–∏—è:            15.00%
```

---

## –ö–∞–∫ —á–∞—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏?

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞:

**stuck_video1**: –ö–∞–∂–¥—ã–µ 48 —á–∞—Å–æ–≤
- –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 10:00
- –°—Ä–µ–¥–∞ 10:00
- –ü—è—Ç–Ω–∏—Ü–∞ 10:00

**stuck_video2**: –ö–∞–∂–¥—ã–µ 48 —á–∞—Å–æ–≤
- –í—Ç–æ—Ä–Ω–∏–∫ 10:00
- –ß–µ—Ç–≤–µ—Ä–≥ 10:00
- –°—É–±–±–æ—Ç–∞ 10:00

**abandoned_payment**: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 18:00
- –°–∞–º—ã–π –∫—Ä–∏—Ç–∏—á–Ω—ã–π —Å–µ–≥–º–µ–Ω—Ç!
- –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron

### Railway (Production)

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å: "Cron Jobs"
2. –î–æ–±–∞–≤—å—Ç–µ –≤ Procfile:
```
retargeting_video1: npm run retargeting stuck_video1
retargeting_video2: npm run retargeting stuck_video2
retargeting_payment: npm run retargeting abandoned_payment
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Railway Cron:
```
0 10 * * 1,3,5 retargeting_video1    # –ü–Ω, –°—Ä, –ü—Ç –≤ 10:00
0 10 * * 2,4,6 retargeting_video2    # –í—Ç, –ß—Ç, –°–± –≤ 10:00
0 18 * * * retargeting_payment       # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 18:00
```

### macOS/Linux (–õ–æ–∫–∞–ª—å–Ω–æ)

```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ:
```bash
# –ó–∞—Å—Ç—Ä—è–≤—à–∏–µ –Ω–∞ video1 (–ü–Ω, –°—Ä, –ü—Ç –≤ 10:00)
0 10 * * 1,3,5 cd /path/to/bot && npm run retargeting stuck_video1

# –ó–∞—Å—Ç—Ä—è–≤—à–∏–µ –Ω–∞ video2 (–í—Ç, –ß—Ç, –°–± –≤ 10:00)
0 10 * * 2,4,6 cd /path/to/bot && npm run retargeting stuck_video2

# –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 18:00)
0 18 * * * cd /path/to/bot && npm run retargeting abandoned_payment
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–Ω—ã–º–∏
```bash
# –ü—è—Ç–Ω–∏—Ü–∞ –≤–µ—á–µ—Ä–æ–º - –º–æ—â–Ω—ã–π –ø—É—à –∑–∞—Å—Ç—Ä—è–≤—à–∏—Ö
npm run retargeting stuck_video1
npm run retargeting stuck_video2
npm run retargeting abandoned_payment
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```bash
# –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ —É—Ç—Ä–æ–º - —Å–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
npm run retargeting stats
npm run retargeting conversion
```

---

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

–í–º–µ—Å—Ç–æ 24—á –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:

```typescript
// –í src/retargeting.ts –∏–∑–º–µ–Ω–∏—Ç–µ:
const users = await userService.getUsersStuckAtStep('video1', 48); // 48—á –≤–º–µ—Å—Ç–æ 24—á
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- 24—á: –ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- 72—á: –í—Ç–æ—Ä–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- 168—á (–Ω–µ–¥–µ–ª—è): –§–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

### A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

–°–æ–∑–¥–∞–π—Ç–µ 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ç–µ–∫—Å—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ä–∞–∑–Ω—ã–º –≥—Ä—É–ø–ø–∞–º:

```typescript
const message = userId % 2 === 0 
  ? "–í–∞—Ä–∏–∞–Ω—Ç A: –ú—è–≥–∫–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ"
  : "–í–∞—Ä–∏–∞–Ω—Ç B: –°—Ä–æ—á–Ω–æ—Å—Ç—å –∏ FOMO";
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:

1. **Open Rate** - –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç–∫—Ä—ã–ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
2. **Click Rate** - –°–∫–æ–ª—å–∫–æ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É
3. **Conversion Rate** - –°–∫–æ–ª—å–∫–æ –¥–æ—à–ª–∏ –¥–æ –æ–ø–ª–∞—Ç—ã
4. **ROI** - –ü—Ä–∏–±—ã–ª—å vs –∑–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏

### –•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

- Open Rate: >50%
- Click Rate: >20%
- Conversion Rate: >5%

---

## –í–∞–∂–Ω–æ! ‚ö†Ô∏è

### Rate Limits Telegram:

- –ù–µ –±–æ–ª–µ–µ 30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É
- –í —Å–∫—Ä–∏–ø—Ç–µ —É–∂–µ –µ—Å—Ç—å delay 100ms –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏
- –ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–∞–º–ø–∞–Ω–∏–∏ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ

### Spam Prevention:

- –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ 24—á –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ unsubscribe rate
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞ - —É–¥–∞–ª–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞

---

## Troubleshooting

### –û—à–∏–±–∫–∞: Cannot connect to database
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL –≤ .env
echo $DATABASE_URL

# –õ–æ–∫–∞–ª—å–Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
brew services list
```

### –û—à–∏–±–∫–∞: Bot token is invalid
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ BOT_TOKEN –≤ .env
echo $BOT_TOKEN
```

### –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ userService –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
npm run retargeting stats  # –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –≤—Å—ë –û–ö
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ mastering retargeting –¥–æ–±–∞–≤—å—Ç–µ:

1. **Email notifications** - –î—É–±–ª–∏—Ä—É–π—Ç–µ –≤–∞–∂–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–∞ email
2. **SMS notifications** - –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
3. **Push notifications** - –ß–µ—Ä–µ–∑ Telegram Web App
4. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - –û–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏, —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ—à–ª—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

---

–ì–æ—Ç–æ–≤–æ! üöÄ –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≤–æ—Ä–æ–Ω–∫—É.
