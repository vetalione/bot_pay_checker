# Telegram Payment Bot

Telegram бот для приема платежей и предоставления доступа в закрытый канал.

## Функционал

- Отправка 3 прогревающих видео после команды /start
- Прием и проверка платежных квитанций с помощью **Gemini AI**
- Автоматическое извлечение данных из квитанций (сумма, номер карты)
- Генерация уникальных invite-ссылок в закрытый канал (действительны 24 часа)
- Проверка суммы платежа (2000 рублей) и реквизитов
- Защита от мошенничества и поддельных квитанций

## Установка

1. Клонировать репозиторий:
```bash
git clone https://github.com/vetalione/bot_pay_checker.git
cd bot_pay_checker
```

2. Установить зависимости:
```bash
npm install
```

3. Настроить переменные окружения:
```bash
cp .env.example .env
# Отредактировать .env файл с вашими данными
```

4. Добавить URL ваших видео в `.env`:
- VIDEO_URL_1
- VIDEO_URL_2
- VIDEO_URL_3

## Запуск

### Локально
```bash
npm run dev
```

### Production
```bash
npm run build
npm start
```

## Деплой на Railway

1. Подключите репозиторий к Railway
2. Добавьте переменные окружения из `.env.example`
3. Railway автоматически развернет приложение

## Переменные окружения

- `BOT_TOKEN` - токен Telegram бота
- `GEMINI_API_KEY` - API ключ Google Gemini для AI проверки квитанций
- `CHANNEL_ID` - ID закрытого канала
- `CHANNEL_INVITE_LINK` - базовая ссылка на канал
- `PAYMENT_AMOUNT` - сумма платежа (по умолчанию 2000)
- `CARD_NUMBER` - номер карты для приема платежей
- `VIDEO_URL_1`, `VIDEO_URL_2`, `VIDEO_URL_3` - URL прогревающих видео

## Использование

1. Пользователь отправляет `/start`
2. Бот последовательно отправляет 3 видео
3. Бот предлагает оплатить и показывает реквизиты
4. Пользователь отправляет квитанцию об оплате
5. Бот проверяет квитанцию и генерирует invite-ссылку
6. Пользователь получает доступ в канал на 24 часа

## Лицензия

MIT
